{"ast":null,"code":"import _BackTop from \"antd/lib/back-top\";\nimport _Row from \"antd/lib/row\";\nimport _Affix from \"antd/lib/affix\";\nimport _Col from \"antd/lib/col\";\nimport _Breadcrumb from \"antd/lib/breadcrumb\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Head from 'next/head';\nimport Header from '../components/Header';\nimport Aurhor from '../components/Author';\nimport '../public/style/pages/detailed.css';\nimport axios from 'axios';\nimport { HourglassOutlined, YoutubeOutlined, FireOutlined, RocketOutlined } from '@ant-design/icons';\nimport marked from 'marked';\nimport Tocify from '../components/tocify.tsx';\nimport hljs from \"highlight.js\";\nimport servicePath from '../config/api';\nimport 'highlight.js/styles/monokai-sublime.css';\nimport CountUp from 'react-countup';\n\nconst Detailed = props => {\n  const tocift = new Tocify();\n  const renderer = new marked.Renderer();\n\n  renderer.heading = (text, level) => {\n    const achor = tocift.add(text, level);\n    return `<a id='${achor}' herf='#${achor}' class=\"anchor-fix\"><h${level}>${text}</h${level}></a>\\n`;\n  };\n\n  const timetrans = date => {\n    var date = new Date(date * 1000); //如果date为13位不需要乘1000\n\n    var Y = date.getFullYear() + '-';\n    var M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n    var D = (date.getDate() < 10 ? '0' + date.getDate() : date.getDate()) + ' ';\n    return Y + M + D;\n  };\n\n  marked.setOptions({\n    renderer: renderer,\n    gfm: true,\n    pedantic: false,\n    sanitize: false,\n    tables: true,\n    breaks: false,\n    smartLists: true,\n    smartypants: false,\n    highlight: function (code) {\n      return hljs.highlightAuto(code).value;\n    }\n  });\n  let html = marked(props.article_content);\n  const style = {\n    height: 40,\n    width: 40,\n    lineHeight: '40px',\n    borderRadius: 50,\n    backgroundColor: '#333',\n    color: '#fff',\n    opacity: .6,\n    textAlign: 'center',\n    fontSize: 20\n  };\n  return __jsx(\"div\", null, __jsx(Head, null, __jsx(\"title\", null, \"Stone-\", props.title)), __jsx(Header, null), __jsx(_Row, {\n    className: \"comm-main\",\n    justify: \"center\"\n  }, __jsx(_Col, {\n    className: \"comm-left\",\n    xs: 24,\n    sm: 24,\n    md: 16,\n    lg: 14,\n    xl: 12\n  }, __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"bread-div\"\n  }, __jsx(_Breadcrumb, null, __jsx(_Breadcrumb.Item, null, __jsx(\"a\", {\n    href: \"/\"\n  }, \"\\u9996\\u9875\")), __jsx(_Breadcrumb.Item, null, props.typeName), __jsx(_Breadcrumb.Item, null, props.title))), __jsx(\"div\", {\n    className: \"detailed-title\"\n  }, props.title), __jsx(\"div\", {\n    className: \"list-icon center\"\n  }, __jsx(\"span\", {\n    className: \"icon-time\"\n  }, __jsx(HourglassOutlined, null), timetrans(props.addTime)), __jsx(\"span\", {\n    className: \"icon-category\"\n  }, __jsx(YoutubeOutlined, null), props.typeName), __jsx(\"span\", {\n    className: \"icon-numberpeople\"\n  }, __jsx(FireOutlined, null), \" \", __jsx(CountUp, {\n    end: props.view_count\n  }), \"\\u4EBA\")), __jsx(\"div\", {\n    className: \"detailed-content\",\n    dangerouslySetInnerHTML: {\n      __html: html\n    }\n  }))), __jsx(_Col, {\n    className: \"comm-right\",\n    xs: 0,\n    sm: 0,\n    md: 6,\n    lg: 6,\n    xl: 3\n  }, __jsx(Aurhor, null), __jsx(_Affix, null, __jsx(\"div\", {\n    className: \"detailed-nav comm-box\"\n  }, __jsx(\"div\", {\n    className: \"nav-title\"\n  }, \"\\u6587\\u7AE0\\u76EE\\u5F55\"), __jsx(\"div\", {\n    className: \"toc-list\"\n  }, tocift && tocift.render()))))), __jsx(_BackTop, null, __jsx(RocketOutlined, {\n    style: style\n  })));\n};\n\nDetailed.getInitialProps = async context => {\n  let id = context.query.id;\n  const promise = new Promise(resolve => {\n    axios(servicePath.getArticleById + id).then(res => {\n      const list = [res.data.data];\n      resolve(list[0]);\n    });\n  });\n  return await promise;\n};\n\nexport default Detailed;","map":null,"metadata":{},"sourceType":"module"}